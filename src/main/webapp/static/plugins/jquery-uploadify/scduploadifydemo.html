<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>scduploadifydemo</title>
<!--<link rel="stylesheet" type="text/css"
			href="../thirdparty/jquery/themes/default/easyui.css">
--><link rel="stylesheet" type="text/css"
	href="../thirdparty/jquery/themes/icon.css">
<link rel="stylesheet" type="text/css"
	href="../thirdparty/jquery/demo/demo.css">
<link rel="stylesheet" type="text/css" href="../css/icon.css">
<script type="text/javascript"
	src="../thirdparty/jquery/jquery-1.6.min.js"></script>
<!--<script type="text/javascript"
	src="../thirdparty/jquery/jquery.easyui.min.js"></script>
--><script type="text/javascript" src="../thirdparty/jquery/locale/easyui-lang-zh-cn.js"></script>
<script language="javascript" src="../geoquery/json2.js"></script>
<!-- -需要引入的文件 三个 -->
<link href="./scduploadify.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./swfobject.js"></script>

<script type="text/javascript" src="./scduploadify.v0.1.js"></script>
<script type="text/javascript">

    $(function(){
     // alert( convertFileSize(1024*1024));
    })
    /***声明scd上传组件
     传入一个div的jquery对象
    ***/ 
   function testComadd(){
       $("#uploadifydiv").scduploadify(
          {
              //一定要指定的参数
		      'filehandlerurl':"../../../document/attachment/filehandler/",  //附件操作的的url
		      'reftno':"",  //关联ID,如果是修改的话，直接赋值给他
		      'reftable':"CP_MAINTENCE",  //关联的表名称 比如阴保维护表的附件
		      'uploader'	:	"./uploadify.swf",  //以下几个参数要修改路径
			  'script'    :	"./scduploadify.jsp",
			  'buttonImg':    "./selectfile.jpg",
		       //可选参数
		       "mode":"add",   //如果是view，那么不生成下面的操作
		       "reftno":"d0cdd756-cd0c-4208-a1b7-29d2cc466012",
		      'filetype':[{name:'文档',value:'1',"fileext":"*.png;*.txt;"},{name:'照片',value:'2',"fileext":"*.doc"},{name:'其他',value:'3'}] ,//文件类型，赋值后可以选择附件类型
		      'sizeLimit':"102400" //100KB
          });
   }
   
    /***声明scd上传组件
     传入一个div的jquery对象
    ***/ 
   function testComview(){
       $("#uploadifydiv").scduploadify(
          {
              //一定要指定的参数
		      'filehandlerurl':"../../../document/attachment/filehandler/",  //附件操作的的url
		      'reftno':"",  //关联ID,如果是修改的话，直接赋值给他
		      'reftable':"CP_MAINTENCE",  //关联的表名称 比如阴保维护表的附件
		      'uploader'	:	"./uploadify.swf",  //以下几个参数要修改路径
			  'script'    :	"./scduploadify.jsp",
			  'buttonImg':    "./selectfile.jpg",
		       //可选参数
		       "mode":"view",   //如果是view，那么不生成下面的操作
		       "reftno":"d0cdd756-cd0c-4208-a1b7-29d2cc466012",
		      'filetype':[{name:'文档',value:'1'},{name:'照片',value:'2'}] ,  //文件类型，赋值后可以选择附件类型
              'sizeLimit':"102400" //100KB
          });
   }
   
   function testNotype(){
        $("#uploadifydiv").scduploadify(
          {
              //一定要指定的参数
		      'filehandlerurl':"../../../document/attachment/filehandler/",  //附件操作的的url
		      'reftno':"",  //关联ID,如果是修改的话，直接赋值给他
		      'reftable':"CP_MAINTENCE",  //关联的表名称 比如阴保维护表的附件
		      'uploader'	:	"./uploadify.swf",  //以下几个参数要修改路径
			  'script'    :	"./scduploadify.jsp",
			  'buttonImg':    "./selectfile.jpg",
		       //可选参数
		       "mode":"add",   //如果是view，那么不生成下面的操作
		       "reftno":"d0cdd756-cd0c-4208-a1b7-29d2cc466012",
		      'filetype':[],   //文件类型，赋值后可以选择附件类型
		      'sizeLimit':"102400" //100KB
          });
   }
   function testNotypeand(){
        $("#uploadifydiv").scduploadify(
          {
              //一定要指定的参数
		      'filehandlerurl':"../../../document/attachment/filehandler/",  //附件操作的的url
		      'reftno':"",  //关联ID,如果是修改的话，直接赋值给他
		      'reftable':"CP_MAINTENCE",  //关联的表名称 比如阴保维护表的附件
		      'uploader'	:	"./uploadify.swf",  //以下几个参数要修改路径
			  'script'    :	"./scduploadify.jsp",
			  'buttonImg':    "./selectfile.jpg",
		       //可选参数
		       "mode":"add",   //如果是view，那么不生成下面的操作
		       "reftno":"d0cdd756-cd0c-4208-a1b7-29d2cc466012",
		      'filetype':[] ,  //文件类型，赋值后可以选择附件类型
		      'fields':[{"name":"wenjming","value":"filename"},  
		           {"name":"gongneng","value":"filefunc"}
		           ////这个地方要是自定义，value里面的值是需要和系统有的：
		           //filename ,filetype ,filesize,filedesc,filefunc
		      ]
          });
   }
   
   function testOnlyType(){
         $("#uploadifydiv").scduploadify(
          {
              //一定要指定的参数
		      'filehandlerurl':"../../../document/attachment/filehandler/",  //附件操作的的url
		      'reftno':"",  //关联ID,如果是修改的话，直接赋值给他
		      'reftable':"CP_MAINTENCE",  //关联的表名称 比如阴保维护表的附件
		      'uploader'	:	"./uploadify.swf",  //以下几个参数要修改路径
			  'script'    :	"./scduploadify.jsp",
			  'buttonImg':    "./selectfile.jpg",
		       //可选参数
		       "mode":"add",   //如果是view，那么不生成下面的操作
		       "reftno":"d0cdd756-cd0c-4208-a1b7-29d2cc466012",
		      'filetype':[{"name":"wubo","value":"1","fileext":"*.png"}]  //文件类型，赋值后可以选择附件类型
		           ////这个地方要是自定义，value里面的值是需要和系统有的：
		           //filename ,filetype ,filesize,filedesc,filefunc
          });
   }
   
    function getiscomplete(){
      alert( $("#uploadifydiv").data("iscomplete"));
   }
   
   function getfilelist(){
   	  var ids = "";
      $.each($("#uploadifydiv").data("filelist"),function(i,n){
      	   ids += n.id+",";
//           alert(JSON.stringify(n));
      });
      if(ids != ""){
      	ids = ids.substring(0,ids.length-1);
      }
   }
   function getfileString(){
       alert($("#uploadifydiv").scduploadifyfilenamelist());
   }
   
   function testHaveMessageBox(){
       var aa = typeof( jQuery.messager);
       alert(aa);
   }
</script>

</head>
<body>
    <input value="测试插件add模式" type="button" onclick="testComadd()"/>
     <input value="测试插件view模式" type="button" onclick="testComview()"/>
     <input value="测试没有附件类型" type="button" onclick="testNotype()"/>
        <input value="测试没有附件类型,不显示附件类型字段" type="button" onclick="testNotypeand()"/>
	<div id="uploadifydiv">
	</div>
	<input  value="是否上传完成" type="button" onclick="getiscomplete()"/>
	<input  value="当前已经上传的文件列表" type="button" onclick="getfilelist()"/>
	<input value="字符串数组" type="button" onclick="getfileString()"/>
	<input  value="测试只有一个分类的情况" type="button" onclick="testOnlyType()"/>
	<input value="测试是否引用了弹出框插件" onclick="testHaveMessageBox()" type="button">
</body>
</html>